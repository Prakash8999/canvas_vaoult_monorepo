{
  "version": 3,
  "sources": ["../../../../../../../../src/modules/ai/chat/models/message.model.ts"],
  "sourcesContent": ["import { DataTypes, Model } from 'sequelize';\r\nimport sequelize from '../../../../config/database';\r\nimport Chat from './chat.model';\r\n\r\nexport class Message extends Model {\r\n    public id!: number;\r\n    public chat_id!: number;\r\n    public role!: 'user' | 'assistant';\r\n    public content!: string;\r\n    public provider?: string;\r\n    public model?: string;\r\n    public tokens_used?: number;\r\n    public created_at!: Date;\r\n}\r\n\r\nMessage.init(\r\n    {\r\n        id: {\r\n            type: DataTypes.INTEGER,\r\n            autoIncrement: true,\r\n            primaryKey: true,\r\n        },\r\n        chat_id: {\r\n            type: DataTypes.INTEGER,\r\n            allowNull: false,\r\n            references: {\r\n                model: Chat,\r\n                key: 'id',\r\n            },\r\n        },\r\n        role: {\r\n            type: DataTypes.ENUM('user', 'assistant'),\r\n            allowNull: false,\r\n        },\r\n        content: {\r\n            type: DataTypes.TEXT,\r\n            allowNull: false,\r\n        },\r\n        provider: {\r\n            type: DataTypes.STRING,\r\n            allowNull: true,\r\n        },\r\n        model: {\r\n            type: DataTypes.STRING,\r\n            allowNull: true,\r\n        },\r\n        tokens_used: {\r\n            type: DataTypes.INTEGER,\r\n            defaultValue: 0,\r\n        },\r\n    },\r\n    {\r\n        sequelize,\r\n        tableName: 'ai_messages',\r\n        timestamps: true,\r\n        updatedAt: false, // Messages are immutable\r\n        createdAt: 'created_at',\r\n    }\r\n);\r\n\r\n// Define associations\r\nMessage.belongsTo(Chat, { foreignKey: 'chat_id', as: 'chat' });\r\nChat.hasMany(Message, { foreignKey: 'chat_id', as: 'messages', onDelete: 'CASCADE' });\r\n\r\nexport default Message;\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAiC;AACjC,sBAAsB;AACtB,kBAAiB;AAEV,MAAM,gBAAgB,uBAAM;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACX;AAEA,QAAQ;AAAA,EACJ;AAAA,IACI,IAAI;AAAA,MACA,MAAM,2BAAU;AAAA,MAChB,eAAe;AAAA,MACf,YAAY;AAAA,IAChB;AAAA,IACA,SAAS;AAAA,MACL,MAAM,2BAAU;AAAA,MAChB,WAAW;AAAA,MACX,YAAY;AAAA,QACR,OAAO,YAAAA;AAAA,QACP,KAAK;AAAA,MACT;AAAA,IACJ;AAAA,IACA,MAAM;AAAA,MACF,MAAM,2BAAU,KAAK,QAAQ,WAAW;AAAA,MACxC,WAAW;AAAA,IACf;AAAA,IACA,SAAS;AAAA,MACL,MAAM,2BAAU;AAAA,MAChB,WAAW;AAAA,IACf;AAAA,IACA,UAAU;AAAA,MACN,MAAM,2BAAU;AAAA,MAChB,WAAW;AAAA,IACf;AAAA,IACA,OAAO;AAAA,MACH,MAAM,2BAAU;AAAA,MAChB,WAAW;AAAA,IACf;AAAA,IACA,aAAa;AAAA,MACT,MAAM,2BAAU;AAAA,MAChB,cAAc;AAAA,IAClB;AAAA,EACJ;AAAA,EACA;AAAA,IACI,2BAAAC;AAAA,IACA,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,WAAW;AAAA;AAAA,IACX,WAAW;AAAA,EACf;AACJ;AAGA,QAAQ,UAAU,YAAAD,SAAM,EAAE,YAAY,WAAW,IAAI,OAAO,CAAC;AAC7D,YAAAA,QAAK,QAAQ,SAAS,EAAE,YAAY,WAAW,IAAI,YAAY,UAAU,UAAU,CAAC;AAEpF,IAAO,wBAAQ;",
  "names": ["Chat", "sequelize"]
}
