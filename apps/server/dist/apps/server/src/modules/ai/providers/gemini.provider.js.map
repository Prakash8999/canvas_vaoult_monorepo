{
  "version": 3,
  "sources": ["../../../../../../../src/modules/ai/providers/gemini.provider.ts"],
  "sourcesContent": ["import { GoogleGenAI } from '@google/genai';\r\nimport { IAIProvider, AIResponse, AIProviderError, PROVIDER_MODELS } from '../ai.types';\r\n\r\n/**\r\n * Gemini AI Provider Implementation\r\n * Handles all interactions with Google's Gemini API\r\n */\r\nexport class GeminiProvider implements IAIProvider {\r\n    readonly name = 'gemini' as const;\r\n\r\n    /**\r\n     * Generate AI response using Gemini\r\n     */\r\n    async generateResponse(\r\n        input: string,\r\n        model: string,\r\n        apiKey: string,\r\n        options?: {\r\n            temperature?: number;\r\n            maxTokens?: number;\r\n        }\r\n    ): Promise<AIResponse> {\r\n        try {\r\n            // Validate model\r\n            if (!this.isModelSupported(model)) {\r\n                throw new AIProviderError(\r\n                    `Model \"${model}\" is not supported by Gemini. Supported models: ${PROVIDER_MODELS.gemini.join(', ')}`,\r\n                    'gemini',\r\n                    400\r\n                );\r\n            }\r\n\r\n            // Initialize Gemini client\r\n            const ai = new GoogleGenAI({ apiKey });\r\n\r\n            // Make API call with generation config\r\n            const response = await ai.models.generateContent({\r\n                model,\r\n                contents: [\r\n                    {\r\n                        role: 'user',\r\n                        parts: [{ text: input }],\r\n                    },\r\n                ],\r\n                config: {\r\n                    temperature: options?.temperature,\r\n                    maxOutputTokens: options?.maxTokens,\r\n                },\r\n            });\r\n\r\n            // Extract text from response\r\n            const content = response.text || '';\r\n\r\n            if (!content) {\r\n                throw new AIProviderError(\r\n                    'Gemini returned an empty response',\r\n                    'gemini',\r\n                    500\r\n                );\r\n            }\r\n\r\n            // Return normalized response\r\n            return {\r\n                content,\r\n                provider: 'gemini',\r\n                model,\r\n                tokensUsed: response.usageMetadata?.totalTokenCount,\r\n                metadata: {\r\n                    candidateCount: response.candidates?.length,\r\n                    finishReason: response.candidates?.[0]?.finishReason,\r\n                },\r\n            };\r\n        } catch (error) {\r\n            // Handle Gemini-specific errors\r\n            if (error instanceof AIProviderError) {\r\n                throw error;\r\n            }\r\n\r\n            // Handle API errors\r\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\r\n            throw new AIProviderError(\r\n                `Gemini API error: ${errorMessage}`,\r\n                'gemini',\r\n                500\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if model is supported by Gemini\r\n     */\r\n    isModelSupported(model: string): boolean {\r\n        return PROVIDER_MODELS.gemini.includes(model as any);\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA4B;AAC5B,gBAA0E;AAMnE,MAAM,eAAsC;AAAA,EACtC,OAAO;AAAA;AAAA;AAAA;AAAA,EAKhB,MAAM,iBACF,OACA,OACA,QACA,SAImB;AACnB,QAAI;AAEA,UAAI,CAAC,KAAK,iBAAiB,KAAK,GAAG;AAC/B,cAAM,IAAI;AAAA,UACN,UAAU,KAAK,mDAAmD,0BAAgB,OAAO,KAAK,IAAI,CAAC;AAAA,UACnG;AAAA,UACA;AAAA,QACJ;AAAA,MACJ;AAGA,YAAM,KAAK,IAAI,yBAAY,EAAE,OAAO,CAAC;AAGrC,YAAM,WAAW,MAAM,GAAG,OAAO,gBAAgB;AAAA,QAC7C;AAAA,QACA,UAAU;AAAA,UACN;AAAA,YACI,MAAM;AAAA,YACN,OAAO,CAAC,EAAE,MAAM,MAAM,CAAC;AAAA,UAC3B;AAAA,QACJ;AAAA,QACA,QAAQ;AAAA,UACJ,aAAa,SAAS;AAAA,UACtB,iBAAiB,SAAS;AAAA,QAC9B;AAAA,MACJ,CAAC;AAGD,YAAM,UAAU,SAAS,QAAQ;AAEjC,UAAI,CAAC,SAAS;AACV,cAAM,IAAI;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,QACJ;AAAA,MACJ;AAGA,aAAO;AAAA,QACH;AAAA,QACA,UAAU;AAAA,QACV;AAAA,QACA,YAAY,SAAS,eAAe;AAAA,QACpC,UAAU;AAAA,UACN,gBAAgB,SAAS,YAAY;AAAA,UACrC,cAAc,SAAS,aAAa,CAAC,GAAG;AAAA,QAC5C;AAAA,MACJ;AAAA,IACJ,SAAS,OAAO;AAEZ,UAAI,iBAAiB,2BAAiB;AAClC,cAAM;AAAA,MACV;AAGA,YAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,YAAM,IAAI;AAAA,QACN,qBAAqB,YAAY;AAAA,QACjC;AAAA,QACA;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAiB,OAAwB;AACrC,WAAO,0BAAgB,OAAO,SAAS,KAAY;AAAA,EACvD;AACJ;",
  "names": []
}
