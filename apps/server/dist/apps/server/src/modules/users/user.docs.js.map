{
  "version": 3,
  "sources": ["../../../../../../src/modules/users/user.docs.ts"],
  "sourcesContent": ["import { OpenApiGeneratorV3, OpenAPIRegistry } from \"@asteasolutions/zod-to-openapi\";\r\nimport {\r\n\tCreateUserSchema,\r\n\tUserSchema,\r\n\tUserOtpVerifySchema,\r\n\tUpdateUserSchema,\r\n} from \"./users.model\";\r\nimport { z } from 'zod';\r\n\r\n\r\nexport const registry = new OpenAPIRegistry();\r\n// Core models\r\nregistry.register('User', UserSchema);\r\nregistry.register('UserCreate', CreateUserSchema);\r\nregistry.register('UserProfileUpdate', UpdateUserSchema);\r\nregistry.register('UserOtpVerify', UserOtpVerifySchema);\r\n\r\n// Login schema (email + password)\r\nconst UserLoginSchema = z.object({\r\n\temail: z.string().email(),\r\n\tpassword: z.string().min(1),\r\n});\r\nregistry.register('UserLogin', UserLoginSchema);\r\n\r\n// Response token schema (used by login/verify endpoints)\r\nconst TokenResponseSchema = z.object({ token: z.string() });\r\nregistry.register('TokenResponse', TokenResponseSchema);\r\n\r\n// Create (signup)\r\nregistry.registerPath({\r\n\tmethod: 'post',\r\n\tpath: '/api/v1/user/signup',\r\n\ttags: ['User'],\r\n\tsummary: 'Create a new user (signup)',\r\n\trequest: {\r\n\t\tbody: {\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: CreateUserSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tresponses: {\r\n\t\t201: {\r\n\t\t\tdescription: 'User created successfully',\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UserSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t\t400: { description: 'Invalid request' },\r\n\t},\r\n});\r\n\r\n// Verify OTP\r\nregistry.registerPath({\r\n\tmethod: 'post',\r\n\tpath: '/api/v1/user/verify-otp',\r\n\ttags: ['User'],\r\n\tsummary: 'Verify OTP and return auth token',\r\n\trequest: {\r\n\t\tbody: {\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UserOtpVerifySchema },\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tresponses: {\r\n\t\t200: {\r\n\t\t\tdescription: 'OTP verified, returns token',\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: TokenResponseSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t\t400: { description: 'Invalid OTP or request' },\r\n\t},\r\n});\r\n\r\n// Login\r\nregistry.registerPath({\r\n\tmethod: 'post',\r\n\tpath: '/api/v1/user/login',\r\n\ttags: ['User'],\r\n\tsummary: 'User login (email + password)',\r\n\trequest: {\r\n\t\tbody: {\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UserLoginSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tresponses: {\r\n\t\t200: {\r\n\t\t\tdescription: 'Login successful, returns token',\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: TokenResponseSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t\t401: { description: 'Invalid credentials' },\r\n\t},\r\n});\r\n\r\n// Get current user profile (protected)\r\nregistry.registerPath({\r\n\tmethod: 'get',\r\n\tpath: '/api/v1/user',\r\n\ttags: ['User'],\r\n\tsummary: \"Get current user's profile\",\r\n\t// mark this operation as protected by the bearerAuth scheme\r\n\tsecurity: [{ bearerAuth: [] }],\r\n\tresponses: {\r\n\t\t200: {\r\n\t\t\tdescription: 'User profile',\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UserSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t\t401: { description: 'Unauthorized' },\r\n\t},\r\n});\r\n\r\n// Update profile\r\nregistry.registerPath({\r\n\tmethod: 'patch',\r\n\tpath: '/api/v1/user',\r\n\ttags: ['User'],\r\n\tsummary: \"Update current user's profile\",\r\n\tsecurity: [{ bearerAuth: [] }],\r\n\trequest: {\r\n\t\tbody: {\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UpdateUserSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tresponses: {\r\n\t\t200: {\r\n\t\t\tdescription: 'Updated user profile',\r\n\t\t\tcontent: {\r\n\t\t\t\t'application/json': { schema: UserSchema },\r\n\t\t\t},\r\n\t\t},\r\n\t\t400: { description: 'Invalid request' },\r\n\t\t401: { description: 'Unauthorized' },\r\n\t},\r\n});\r\n\r\n// Delete / Block user\r\nregistry.registerPath({\r\n\tmethod: 'delete',\r\n\tpath: '/api/v1/user',\r\n\ttags: ['User'],\r\n\tsummary: 'Block or delete current user',\r\n\tsecurity: [{ bearerAuth: [] }],\r\n\tresponses: {\r\n\t\t204: { description: 'User blocked/deleted (no content)' },\r\n\t\t401: { description: 'Unauthorized' },\r\n\t},\r\n});\r\n\r\nconst baseDoc = new OpenApiGeneratorV3(registry.definitions).generateDocument({\r\n\topenapi: '3.0.0',\r\n\tinfo: {\r\n\t\ttitle: 'User Service API',\r\n\t\tversion: '1.0.0',\r\n\t},\r\n\tservers: [{ url: 'http://localhost:3000' }],\r\n});\r\n\r\n// Attach security schemes after generation to avoid type incompatibilities with\r\n// the generator's config object. Swagger UI will then show an Authorize button.\r\n(baseDoc as any).components = {\r\n\tsecuritySchemes: {\r\n\t\tbearerAuth: {\r\n\t\t\ttype: 'http',\r\n\t\t\tscheme: 'bearer',\r\n\t\t\tbearerFormat: 'JWT',\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const userOpenApiDoc = baseDoc;\r\n"],
  "mappings": "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",
  "names": []
}
