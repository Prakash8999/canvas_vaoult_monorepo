{
  "version": 3,
  "sources": ["../../../../../../src/modules/assets/asset.model.ts"],
  "sourcesContent": ["import { DataTypes, Model } from 'sequelize';\r\nimport sequelize from '../../config/database';\r\nimport { z } from 'zod';\r\nimport { extendZodWithOpenApi } from '@asteasolutions/zod-to-openapi';\r\n\r\nextendZodWithOpenApi(z);\r\n\r\nexport const ImageSchema = z\r\n  .object({\r\n    id: z.number().int().openapi({\r\n      example: 1,\r\n      description: 'Unique identifier for the image record',\r\n    }),\r\n\r\n    url: z.url().openapi({\r\n      example: 'https://s3.amazonaws.com/bucket-name/images/abc123.png',\r\n      description: 'Publicly accessible image URL on S3',\r\n    }),\r\n    user_Id: z.number().int().openapi({\r\n      example: 42,\r\n      description: 'ID of the user who uploaded the image',\r\n    }),\r\n    s3_key: z.string().min(1).openapi({\r\n      example: 'images/abc123.png',\r\n      description: 'S3 object key used to fetch or delete the file',\r\n    }),\r\n\r\n    file_name: z.string().min(1).openapi({\r\n      example: 'profile_pic.png',\r\n      description: 'Original uploaded file name',\r\n    }),\r\n\r\n    file_type: z.string().min(1).openapi({\r\n      example: 'image/png',\r\n      description: 'MIME type of the uploaded file',\r\n    }),\r\n\r\n    size_kb: z.number().positive().openapi({\r\n      example: 245.7,\r\n      description: 'File size in kilobytes',\r\n    }),\r\n\r\n    link_id: z.number().int().nullable().optional().openapi({\r\n      example: 101,\r\n      description: 'ID of the linked entity (e.g., document, post, canvas, etc.)',\r\n    }),\r\n\r\n    asset_type: z\r\n      .enum(['Note', 'Post', 'Canvas', 'User', 'Other'])\r\n      .nullable()\r\n      .optional()\r\n      .openapi({\r\n        example: 'Note',\r\n        description: 'Type of entity this image is associated with',\r\n      }),\r\n\r\n    metadata: z\r\n      .record(z.string(), z.any())\r\n      .nullable()\r\n      .optional()\r\n      .openapi({\r\n        example: { width: 800, height: 600 },\r\n        description: 'Optional metadata about the image (dimensions, EXIF, etc.)',\r\n      }),\r\n\r\n    created_at: z.date().optional().openapi({\r\n      type: 'string',\r\n      format: 'date-time',\r\n      example: '2025-10-08T09:00:00Z',\r\n      description: 'Timestamp when the image record was created',\r\n    }),\r\n\r\n    updated_at: z.date().optional().openapi({\r\n      type: 'string',\r\n      format: 'date-time',\r\n      example: '2025-10-08T09:00:00Z',\r\n      description: 'Timestamp when the image record was last updated',\r\n    }),\r\n  })\r\n  .openapi({\r\n    title: 'ImageAssets',\r\n    description: 'Represents an image stored in S3 with metadata and linkage information',\r\n  });\r\n\r\n\r\nexport const CreateImageSchema = ImageSchema.omit({\r\n  id: true,\r\n}).openapi({\r\n  title: 'CreateImageInput',\r\n  description: 'Payload for uploading and storing image metadata',\r\n});\r\n\r\nexport const UpdateImageSchema = ImageSchema.partial().omit({\r\n  id: true,\r\n  created_at: true,\r\n}).openapi({\r\n  title: 'UpdateImageInput',\r\n  description: 'Payload for updating image metadata',\r\n});\r\n\r\nexport type ImageAttributes = z.infer<typeof ImageSchema>;\r\nexport type ImageCreationAttributes = z.infer<typeof CreateImageSchema>;\r\nexport type ImageUpdateAttributes = z.infer<typeof UpdateImageSchema>;\r\n\r\n\r\nexport class ImageAssets\r\n  extends Model<ImageAttributes, ImageCreationAttributes>\r\n  implements ImageAttributes {\r\n  public id!: number;\r\n  public url!: string;\r\n  public user_Id!: number;\r\n  public s3_key!: string;\r\n  public file_name!: string;\r\n  public file_type!: string;\r\n  public size_kb!: number;\r\n  public link_id?: number | null;\r\n  public asset_type?: 'Note' | 'Post' | 'Canvas' | 'User' | 'Other' | null;\r\n  public metadata?: Record<string, any> | null;\r\n  public created_at!: Date;\r\n  public updated_at!: Date;\r\n}\r\n\r\nImageAssets.init(\r\n  {\r\n    id: {\r\n      type: DataTypes.INTEGER,\r\n      autoIncrement: true,\r\n      primaryKey: true,\r\n      allowNull: false,\r\n    },\r\n    url: {\r\n      type: DataTypes.STRING(500),\r\n      allowNull: false,\r\n    },\r\n    s3_key: {\r\n      type: DataTypes.STRING(500),\r\n      allowNull: false\r\n    },\r\n    file_name: {\r\n      type: DataTypes.STRING(255),\r\n      allowNull: false,\r\n    },\r\n    user_Id: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n    },\r\n    file_type: {\r\n      type: DataTypes.STRING(100),\r\n      allowNull: false,\r\n    },\r\n    size_kb: {\r\n      type: DataTypes.FLOAT,\r\n      allowNull: false,\r\n    },\r\n    link_id: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: true,\r\n    },\r\n    asset_type: {\r\n      type: DataTypes.ENUM('Note', 'Post', 'Canvas', 'User', 'Other'),\r\n      allowNull: true,\r\n    },\r\n    metadata: {\r\n      type: DataTypes.JSON,\r\n      allowNull: true,\r\n      comment: 'Additional metadata like dimensions, EXIF info, etc.',\r\n    },\r\n    created_at: {\r\n      type: DataTypes.DATE,\r\n      allowNull: false,\r\n\r\n    },\r\n    updated_at: {\r\n      type: DataTypes.DATE,\r\n      allowNull: true,\r\n    },\r\n  },\r\n  {\r\n    sequelize,\r\n    tableName: 'assets',\r\n    timestamps: false\r\n  }\r\n);\r\n\r\nexport default ImageAssets;\r\n"],
  "mappings": "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",
  "names": ["sequelize"]
}
