{
  "version": 3,
  "sources": ["../../../../../../src/modules/assets/asset.docs.ts"],
  "sourcesContent": ["import { OpenApiGeneratorV3, OpenAPIRegistry } from \"@asteasolutions/zod-to-openapi\";\r\nimport { z } from 'zod';\r\n\r\n// Asset response schemas\r\nconst UploadedFileSchema = z.object({\r\n  size: z.number().describe('File size in KB'),\r\n  url: z.string().url().describe('Public URL of the uploaded file'),\r\n  key: z.string().describe('S3 key of the uploaded file'),\r\n});\r\nconst UploadResponseSchema = z.object({\r\n  message: z.string(),\r\n  data: UploadedFileSchema,\r\n});\r\n\r\nconst DeleteFilesRequestSchema = z.object({\r\n  keys: z.array(z.string()).min(1).describe('Array of S3 keys to delete'),\r\n});\r\n\r\nconst DeleteFilesResponseSchema = z.object({\r\n  message: z.string(),\r\n  data: z.object({\r\n    success: z.boolean(),\r\n    message: z.string(),\r\n  }),\r\n});\r\n\r\nexport const assetRegistry = new OpenAPIRegistry();\r\n\r\n// Register schemas\r\nassetRegistry.register('UploadedFile', UploadedFileSchema);\r\nassetRegistry.register('UploadResponse', UploadResponseSchema);\r\nassetRegistry.register('DeleteFilesRequest', DeleteFilesRequestSchema);\r\nassetRegistry.register('DeleteFilesResponse', DeleteFilesResponseSchema);\r\n\r\n// Upload single image\r\nassetRegistry.registerPath({\r\n  method: 'post',\r\n  path: '/api/v1/assets/upload',\r\n  tags: ['Assets'],\r\n  summary: 'Upload a single image file',\r\n  description: 'Upload a single image file (JPEG, PNG, GIF, WebP, SVG) to S3. Specify fileType as \"note\" for note attachments or \"canvas\" for canvas images. Only authenticated users can upload files.',\r\n  security: [{ bearerAuth: [] }],\r\n  parameters: [\r\n    {\r\n      name: 'fileType',\r\n      in: 'query',\r\n      required: true,\r\n      schema: {\r\n        type: 'string',\r\n        enum: ['note', 'canvas'],\r\n        default: 'canvas'\r\n      },\r\n      description: 'Type of file being uploaded'\r\n    }\r\n  ],\r\n  request: {\r\n    body: {\r\n      content: {\r\n        'multipart/form-data': {\r\n          schema: z.object({\r\n            image: z.any().openapi({\r\n              type: 'string',\r\n              format: 'binary',\r\n              description: 'Image file to upload (JPEG, PNG, GIF, WebP, SVG only)'\r\n            }),\r\n          }),\r\n        },\r\n      },\r\n    },\r\n  },\r\n  responses: {\r\n    200: {\r\n      description: 'Image uploaded successfully',\r\n      content: {\r\n        'application/json': { schema: UploadResponseSchema },\r\n      },\r\n    },\r\n    400: {\r\n      description: 'Bad request - No file uploaded or invalid file type',\r\n    },\r\n    401: {\r\n      description: 'Unauthorized - Authentication required',\r\n    },\r\n    500: {\r\n      description: 'Internal server error',\r\n    },\r\n  },\r\n});\r\n\r\n// Delete multiple files\r\nassetRegistry.registerPath({\r\n  method: 'delete',\r\n  path: '/api/v1/assets/delete',\r\n  tags: ['Assets'],\r\n  summary: 'Delete multiple files from S3',\r\n  description: 'Delete multiple files from S3 storage using their keys. Only authenticated users can delete files.',\r\n  security: [{ bearerAuth: [] }],\r\n  request: {\r\n    body: {\r\n      content: {\r\n        'application/json': { schema: DeleteFilesRequestSchema },\r\n      },\r\n    },\r\n  },\r\n  responses: {\r\n    200: {\r\n      description: 'Files deleted successfully',\r\n      content: {\r\n        'application/json': { schema: DeleteFilesResponseSchema },\r\n      },\r\n    },\r\n    400: {\r\n      description: 'Bad request - Invalid keys array',\r\n    },\r\n    401: {\r\n      description: 'Unauthorized - Authentication required',\r\n    },\r\n    500: {\r\n      description: 'Internal server error',\r\n    },\r\n  },\r\n});\r\n\r\nexport const assetOpenApiDoc = new OpenApiGeneratorV3(assetRegistry.definitions).generateDocument({\r\n  openapi: '3.0.0',\r\n  info: {\r\n    title: 'Asset Service API',\r\n    version: '1.0.0',\r\n    description: 'API for managing file uploads and deletions',\r\n  },\r\n  servers: [{ url: 'http://localhost:3000' }],\r\n});"],
  "mappings": "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",
  "names": []
}
